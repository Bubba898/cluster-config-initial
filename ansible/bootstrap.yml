---
# Main bootstrap playbook - orchestrates the complete k3s + Flux setup
# This playbook imports individual playbooks in the correct order

- name: Prepare nodes
  ansible.builtin.import_playbook: prepare-nodes.yml

- name: Install k3s
  ansible.builtin.import_playbook: install-k3s.yml

- name: Setup kubeconfig
  ansible.builtin.import_playbook: setup-kubeconfig.yml

- name: Setup Flux
  ansible.builtin.import_playbook: setup-flux.yml

- name: Migrate to in-cluster GitLab
  ansible.builtin.import_playbook: migrate-to-incluster-gitlab.yml
